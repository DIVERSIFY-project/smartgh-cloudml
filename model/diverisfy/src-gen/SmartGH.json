{ "eClass":"net.cloudml.core:CloudMLModel" ,
 "name":"SmartGH ",
"providers": [
{ "eClass":"net.cloudml.core:Provider" ,
 "name":"openstack-nova",
 "credentials":"/home/huis/cloudml-test/credentialsOpenstack",
"properties": [
{ "eClass":"net.cloudml.core:Property" ,
 "name":"endPoint",
 "value":"http://192.168.1.10:5000/v2.0"}
]
}
]
,
"internalComponents": [
{ "eClass":"net.cloudml.core:InternalComponent" ,
 "name":"Hopper",
"resources": [
{ "eClass":"net.cloudml.core:Resource" ,
 "name":"DockerImage",
 "downloadCommand":"sudo docker pull songhui/smhp-hopper",
 "startCommand":"sudo docker run -i -t -e &quot;redisurl=$(cat @instance{name}.redisurl)&quot; songhui/smhp-hopper /bin/bash /opt/gh/run_hopper.sh",
 "requireCredentials":false,
 "executeLocally":false}
]
,
"requiredPorts": [
{ "eClass":"net.cloudml.core:RequiredPort" ,
 "name":"redisReq",
 "isLocal":false,
 "portNumber":"0",
 "isMandatory":true,
 "component":"internalComponents[Hopper]"}
]
,
"requiredExecutionPlatform":
{ "eClass":"net.cloudml.core:RequiredExecutionPlatform" ,
 "name":"ubuntuReq",
 "owner":"internalComponents[Hopper]",
"demands": [
{ "eClass":"net.cloudml.core:Property" ,
 "name":"OS",
 "value":"Ubuntu/docker"}
]
}
}
,
{ "eClass":"net.cloudml.core:InternalComponent" ,
 "name":"SensorProcessor",
"resources": [
{ "eClass":"net.cloudml.core:Resource" ,
 "name":"DockerImage",
 "downloadCommand":"sudo docker pull songhui/smhp-sensor",
 "startCommand":"sudo docker run -i -t -e &quot;redisurl=$(cat @instance{name}.redisurl)&quot; songhui/smhp-sensor /bin/bash /opt/gh/run_sensor.sh",
 "requireCredentials":false,
 "executeLocally":false}
]
,
"requiredPorts": [
{ "eClass":"net.cloudml.core:RequiredPort" ,
 "name":"redisReq",
 "isLocal":false,
 "portNumber":"0",
 "isMandatory":true,
 "component":"internalComponents[SensorProcessor]"}
]
,
"requiredExecutionPlatform":
{ "eClass":"net.cloudml.core:RequiredExecutionPlatform" ,
 "name":"ubuntuReq",
 "owner":"internalComponents[SensorProcessor]",
"demands": [
{ "eClass":"net.cloudml.core:Property" ,
 "name":"OS",
 "value":"Ubuntu/docker"}
]
}
}
,
{ "eClass":"net.cloudml.core:InternalComponent" ,
 "name":"RedisDB",
"resources": [
{ "eClass":"net.cloudml.core:Resource" ,
 "name":"DockerImage",
 "downloadCommand":"sudo docker run -d -p 6379:6379 redis",
 "requireCredentials":false,
 "executeLocally":false}
]
,
"providedPorts": [
{ "eClass":"net.cloudml.core:ProvidedPort" ,
 "name":"redisPrv",
 "isLocal":false,
 "portNumber":"6379",
 "component":"internalComponents[RedisDB]"}
]
,
"requiredExecutionPlatform":
{ "eClass":"net.cloudml.core:RequiredExecutionPlatform" ,
 "name":"ubuntuReq",
 "owner":"internalComponents[RedisDB]",
"demands": [
{ "eClass":"net.cloudml.core:Property" ,
 "name":"OS",
 "value":"Ubuntu/docker"}
]
}
}
]
,
"internalComponentInstances": [
{ "eClass":"net.cloudml.core:InternalComponentInstance" ,
 "name":"hopper1",
 "type":"internalComponents[Hopper]",
"requiredPortInstances": [
{ "eClass":"net.cloudml.core:RequiredPortInstance" ,
 "name":"redisReq_hopper1",
 "type":"internalComponents[Hopper]/requiredPorts[redisReq]"}
]
,
"requiredExecutionPlatformInstance":
{ "eClass":"net.cloudml.core:RequiredExecutionPlatformInstance" ,
 "name":"ubuntuReq_hopper1",
 "owner":"internalComponentInstances[hopper1]",
 "type":"internalComponents[Hopper]/requiredExecutionPlatform[ubuntuReq]"}
}
,
{ "eClass":"net.cloudml.core:InternalComponentInstance" ,
 "name":"redis1",
 "type":"internalComponents[RedisDB]",
"providedPortInstances": [
{ "eClass":"net.cloudml.core:ProvidedPortInstance" ,
 "name":"redisPrv_redis1",
 "type":"internalComponents[RedisDB]/providedPorts[redisPrv]"}
]
,
"requiredExecutionPlatformInstance":
{ "eClass":"net.cloudml.core:RequiredExecutionPlatformInstance" ,
 "name":"ubuntuReq_redis1",
 "owner":"internalComponentInstances[redis1]",
 "type":"internalComponents[RedisDB]/requiredExecutionPlatform[ubuntuReq]"}
}
,
{ "eClass":"net.cloudml.core:InternalComponentInstance" ,
 "name":"sensor1",
 "type":"internalComponents[SensorProcessor]",
"requiredPortInstances": [
{ "eClass":"net.cloudml.core:RequiredPortInstance" ,
 "name":"redisReq_sensor1",
 "type":"internalComponents[SensorProcessor]/requiredPorts[redisReq]"}
]
,
"requiredExecutionPlatformInstance":
{ "eClass":"net.cloudml.core:RequiredExecutionPlatformInstance" ,
 "name":"ubuntuReq_sensor1",
 "owner":"internalComponentInstances[sensor1]",
 "type":"internalComponents[SensorProcessor]/requiredExecutionPlatform[ubuntuReq]"}
}
]
,
"vms": [
{ "eClass":"net.cloudml.core:VM" ,
 "name":"OpenstackMedium",
 "Region":"RegionOne",
 "minRam":"2048",
 "maxRam":"0",
 "minCores":"1",
 "maxCores":"0",
 "minStorage":"10",
 "maxStorage":"0",
 "os":"ubuntu",
 "is64os":false,
 "imageId":"RegionOne/69df9b62-0549-4fce-9ef6-3eb06f34eee8",
 "securityGroup":"default",
 "sshKey":"mcuser",
 "privateKey":"/home/huis/cloudml-test/mcuser.pem",
 "groupName":"diversify",
 "provider":"providers[openstack-nova]",
"providedExecutionPlatforms": [
{ "eClass":"net.cloudml.core:ProvidedExecutionPlatform" ,
 "name":"ubuntuPrv",
 "owner":"vms[OpenstackMedium]",
"offers": [
{ "eClass":"net.cloudml.core:Property" ,
 "name":"OS",
 "value":"Ubuntu/docker"}
]
}
]
}
]
,
"vmInstances": [
{ "eClass":"net.cloudml.core:VMInstance" ,
 "name":"hs_diversify_openstack1",
 "type":"vms[OpenstackMedium]",
"providedExecutionPlatformInstances": [
{ "eClass":"net.cloudml.core:ProvidedExecutionPlatformInstance" ,
 "name":"ubuntuPrv_hs_diversify_openstack1",
 "owner":"vmInstances[hs_diversify_openstack1]",
 "type":"vms[OpenstackMedium]/providedExecutionPlatforms[ubuntuPrv]"}
]
}
]
,
"relationships": [
{ "eClass":"net.cloudml.core:Relationship" ,
 "name":"Redis2Hopper",
 "requiredPort":"internalComponents[Hopper]/requiredPorts[redisReq]",
 "providedPort":"internalComponents[RedisDB]/providedPorts[redisPrv]",
"requiredPortResource":{ "eClass":"net.cloudml.core:Resource" ,
 "name":"DockerRun",
 "installCommand":"cd ~ ; echo &apos;echo &quot;$2:$3&quot;>@instance{requiredEnd/owner/value/name}.redisurl&apos;>config_redisurl.sh; sudo bash config_redisurl.sh",
 "requireCredentials":false,
 "executeLocally":false}
}
,
{ "eClass":"net.cloudml.core:Relationship" ,
 "name":"Redis2Sensors",
 "requiredPort":"internalComponents[SensorProcessor]/requiredPorts[redisReq]",
 "providedPort":"internalComponents[RedisDB]/providedPorts[redisPrv]",
"requiredPortResource":{ "eClass":"net.cloudml.core:Resource" ,
 "name":"DockerRun",
 "installCommand":"cd ~ ; echo &apos;echo &quot;$2:$3&quot;>@instance{requiredEnd/owner/value/name}.redisurl&apos;>config_redisurl.sh; sudo bash config_redisurl.sh",
 "requireCredentials":false,
 "executeLocally":false}
}
]
,
"relationshipInstances": [
{ "eClass":"net.cloudml.core:RelationshipInstance" ,
 "name":"NoName 1328",
 "type":"relationships[Redis2Sensors]",
 "requiredPortInstance":"internalComponentInstances[sensor1]/requiredPortInstances[redisReq_sensor1]",
 "providedPortInstance":"internalComponentInstances[redis1]/providedPortInstances[redisPrv_redis1]"}
,
{ "eClass":"net.cloudml.core:RelationshipInstance" ,
 "name":"NoName21789",
 "type":"relationships[Redis2Hopper]",
 "requiredPortInstance":"internalComponentInstances[hopper1]/requiredPortInstances[redisReq_hopper1]",
 "providedPortInstance":"internalComponentInstances[redis1]/providedPortInstances[redisPrv_redis1]"}
]
,
"executesInstances": [
{ "eClass":"net.cloudml.core:ExecuteInstance" ,
 "name":"NoName10364",
 "providedExecutionPlatformInstance":"vmInstances[hs_diversify_openstack1]/providedExecutionPlatformInstances[ubuntuPrv_hs_diversify_openstack1]",
 "requiredExecutionPlatformInstance":"internalComponentInstances[sensor1]/requiredExecutionPlatformInstance[ubuntuReq_sensor1]"}
,
{ "eClass":"net.cloudml.core:ExecuteInstance" ,
 "name":"NoName55766",
 "providedExecutionPlatformInstance":"vmInstances[hs_diversify_openstack1]/providedExecutionPlatformInstances[ubuntuPrv_hs_diversify_openstack1]",
 "requiredExecutionPlatformInstance":"internalComponentInstances[hopper1]/requiredExecutionPlatformInstance[ubuntuReq_hopper1]"}
,
{ "eClass":"net.cloudml.core:ExecuteInstance" ,
 "name":"NoName50019",
 "providedExecutionPlatformInstance":"vmInstances[hs_diversify_openstack1]/providedExecutionPlatformInstances[ubuntuPrv_hs_diversify_openstack1]",
 "requiredExecutionPlatformInstance":"internalComponentInstances[redis1]/requiredExecutionPlatformInstance[ubuntuReq_redis1]"}
]
}
